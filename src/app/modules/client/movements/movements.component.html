<!--<p>movements works!</p>-->


<div class="withdraw-container">
  
<form class="mb-8" (ngSubmit)="realizarConsulta()">
  <h1 class="text-2xl font-bold mb-4" style="text-align: center;">Consulta de Movimientos</h1><br><br>

  <div class="">
    <label for="numeroCuenta" class="block text-gray-700 font-bold mb-1">Número de cuenta:</label>
    <input type="text" id="numeroCuenta" name="numeroCuenta" [(ngModel)]="numeroCuenta" required class="px-4 py-2 border border-gray-300 rounded">
  </div>
  <mat-form-field class="w-full">
    <mat-label>Elija una fecha de inicio y fin</mat-label>
  <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
    <input matStartDate formControlName="start" placeholder="Start date">
    <input matEndDate formControlName="end" placeholder="End date">
  </mat-date-range-input>
  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-date-range-picker #picker></mat-date-range-picker>
  </mat-form-field>
  <!-- <div class="mb-4">
    <br><label for="fechaInicio" class="block text-gray-700 font-bold mb-1">Fecha de inicio:</label>
    <input type="date" id="fechaInicio" name="fechaInicio" [(ngModel)]="fechaInicio" required
      class="px-4 py-2 border border-gray-300 rounded">
  </div>
  <div class="mb-4">
    <label for="fechaFin" class="block text-gray-700 font-bold mb-1">Fecha de fin:</label>
    <input type="date" id="fechaFin" name="fechaFin" [(ngModel)]="fechaFin" required
      class="px-4 py-2 border border-gray-300 rounded">
  </div> -->
  <button type="submit" class="px-4 py-2 bg-blue-500 text-white font-bold rounded" (click)="realizarConsulta()">Consultar Movimientos</button>

  
</form>

<!-- Mostrar mensaje de error -->
<div *ngIf="!formValid" class="error-message">
  <p>{{ errorFecha }}</p>
</div>

<br>
<!-- Mostrar el formulario de detalles de movimientos si se ha realizado una consulta -->
<div *ngIf="mostrarDesglose">
  <h2>Últimos Movimientos</h2>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Concepto</th>
        <th>Nro. Cuenta</th>
        <th>Débito</th>
        <th>Crédito</th>
        <th>Saldo</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let movimiento of movimientos">
        <td>{{ movimiento.valueDate.split("T")[0] }}</td> 
        <td>{{ movimiento.notes == '' ? 'Transferencia Bancaria ': movimiento.notes }}</td>
        <td>{{ movimiento.debtorAccount }}</td>
        <td>{{ movimiento.transactionType == 'WITHDRAWAL' || movimiento.ammount<0  ? (-1)*movimiento.ammount : 0.00 }}</td>
        <td>{{ movimiento.transactionType != 'WITHDRAWAL' && movimiento.ammount>0 ? movimiento.ammount : 0.00 }}</td>
        <td>{{movimiento.balanceAfterTransaction}}</td>
      </tr>
    </tbody>
  </table>
  <br><br>
</div>
</div>

